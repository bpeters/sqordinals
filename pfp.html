<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta charset="utf-8"/>
<style type="text/css">
html {
  height: 100%;
}
body {
  min-height: 100%;
  margin: 0;
  padding: 0;
  background-color: black;
}
canvas {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 500px; /* Adjust the width and height as desired */
  height: 500px;
}
.face {
                position: absolute;
                width: 100px;
                height: 100px;
                background: rgba(0, 127, 127, 0.5);
                border: 1px solid #00ffff;
                box-sizing: border-box;
            }
            .dot {
            position: absolute;
            width: 5px;
            height: 5px;
            background: rgba(0, 127, 127, 0.5);
            border-radius: 50%;
        }
</style>
</head>
<body>
<script>
  (()=>{"use strict";const t=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const e=Math.PI/180,s=180/Math.PI;function i(){const e=4294967295*Math.random()|0,s=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&s]+t[s>>8&255]+"-"+t[s>>16&15|64]+t[s>>24&255]+"-"+t[63&i|128]+t[i>>8&255]+"-"+t[i>>16&255]+t[i>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toLowerCase()}function r(t,e,s){return Math.max(e,Math.min(s,t))}class h{constructor(t=0,e=0,s=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=s,this._w=i}static slerpFlat(t,e,s,i,r,h,n){let a=s[i+0],o=s[i+1],l=s[i+2],c=s[i+3];const u=r[h+0],d=r[h+1],m=r[h+2],x=r[h+3];if(0===n)return t[e+0]=a,t[e+1]=o,t[e+2]=l,void(t[e+3]=c);if(1===n)return t[e+0]=u,t[e+1]=d,t[e+2]=m,void(t[e+3]=x);if(c!==x||a!==u||o!==d||l!==m){let t=1-n;const e=a*u+o*d+l*m+c*x,s=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),h=Math.atan2(r,e*s);t=Math.sin(t*h)/r,n=Math.sin(n*h)/r}const r=n*s;if(a=a*t+u*r,o=o*t+d*r,l=l*t+m*r,c=c*t+x*r,t===1-n){const t=1/Math.sqrt(a*a+o*o+l*l+c*c);a*=t,o*=t,l*=t,c*=t}}t[e]=a,t[e+1]=o,t[e+2]=l,t[e+3]=c}static multiplyQuaternionsFlat(t,e,s,i,r,h){const n=s[i],a=s[i+1],o=s[i+2],l=s[i+3],c=r[h],u=r[h+1],d=r[h+2],m=r[h+3];return t[e]=n*m+l*c+a*d-o*u,t[e+1]=a*m+l*u+o*c-n*d,t[e+2]=o*m+l*d+n*u-a*c,t[e+3]=l*m-n*c-a*u-o*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,s,i){return this._x=t,this._y=e,this._z=s,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const s=t._x,i=t._y,r=t._z,h=t._order,n=Math.cos,a=Math.sin,o=n(s/2),l=n(i/2),c=n(r/2),u=a(s/2),d=a(i/2),m=a(r/2);switch(h){case"XYZ":this._x=u*l*c+o*d*m,this._y=o*d*c-u*l*m,this._z=o*l*m+u*d*c,this._w=o*l*c-u*d*m;break;case"YXZ":this._x=u*l*c+o*d*m,this._y=o*d*c-u*l*m,this._z=o*l*m-u*d*c,this._w=o*l*c+u*d*m;break;case"ZXY":this._x=u*l*c-o*d*m,this._y=o*d*c+u*l*m,this._z=o*l*m+u*d*c,this._w=o*l*c-u*d*m;break;case"ZYX":this._x=u*l*c-o*d*m,this._y=o*d*c+u*l*m,this._z=o*l*m-u*d*c,this._w=o*l*c+u*d*m;break;case"YZX":this._x=u*l*c+o*d*m,this._y=o*d*c+u*l*m,this._z=o*l*m-u*d*c,this._w=o*l*c-u*d*m;break;case"XZY":this._x=u*l*c-o*d*m,this._y=o*d*c-u*l*m,this._z=o*l*m+u*d*c,this._w=o*l*c+u*d*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const s=e/2,i=Math.sin(s);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,s=e[0],i=e[4],r=e[8],h=e[1],n=e[5],a=e[9],o=e[2],l=e[6],c=e[10],u=s+n+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(l-a)*t,this._y=(r-o)*t,this._z=(h-i)*t}else if(s>n&&s>c){const t=2*Math.sqrt(1+s-n-c);this._w=(l-a)/t,this._x=.25*t,this._y=(i+h)/t,this._z=(r+o)/t}else if(n>c){const t=2*Math.sqrt(1+n-s-c);this._w=(r-o)/t,this._x=(i+h)/t,this._y=.25*t,this._z=(a+l)/t}else{const t=2*Math.sqrt(1+c-s-n);this._w=(h-i)/t,this._x=(r+o)/t,this._y=(a+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let s=t.dot(e)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(r(this.dot(t),-1,1)))}rotateTowards(t,e){const s=this.angleTo(t);if(0===s)return this;const i=Math.min(1,e/s);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const s=t._x,i=t._y,r=t._z,h=t._w,n=e._x,a=e._y,o=e._z,l=e._w;return this._x=s*l+h*n+i*o-r*a,this._y=i*l+h*a+r*n-s*o,this._z=r*l+h*o+s*a-i*n,this._w=h*l-s*n-i*a-r*o,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const s=this._x,i=this._y,r=this._z,h=this._w;let n=h*t._w+s*t._x+i*t._y+r*t._z;if(n<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,n=-n):this.copy(t),n>=1)return this._w=h,this._x=s,this._y=i,this._z=r,this;const a=1-n*n;if(a<=Number.EPSILON){const t=1-e;return this._w=t*h+e*this._w,this._x=t*s+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const o=Math.sqrt(a),l=Math.atan2(o,n),c=Math.sin((1-e)*l)/o,u=Math.sin(e*l)/o;return this._w=h*c+this._w*u,this._x=s*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,s){return this.copy(t).slerp(e,s)}random(){const t=Math.random(),e=Math.sqrt(1-t),s=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),s*Math.sin(r),s*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class n{constructor(t=0,e=0,s=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=s}set(t,e,s){return void 0===s&&(s=this.z),this.x=t,this.y=e,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(o.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(o.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,s=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*s+r[6]*i,this.y=r[1]*e+r[4]*s+r[7]*i,this.z=r[2]*e+r[5]*s+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,s=this.y,i=this.z,r=t.elements,h=1/(r[3]*e+r[7]*s+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*s+r[8]*i+r[12])*h,this.y=(r[1]*e+r[5]*s+r[9]*i+r[13])*h,this.z=(r[2]*e+r[6]*s+r[10]*i+r[14])*h,this}applyQuaternion(t){const e=this.x,s=this.y,i=this.z,r=t.x,h=t.y,n=t.z,a=t.w,o=a*e+h*i-n*s,l=a*s+n*e-r*i,c=a*i+r*s-h*e,u=-r*e-h*s-n*i;return this.x=o*a+u*-r+l*-n-c*-h,this.y=l*a+u*-h+c*-r-o*-n,this.z=c*a+u*-n+o*-h-l*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,s=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*s+r[8]*i,this.y=r[1]*e+r[5]*s+r[9]*i,this.z=r[2]*e+r[6]*s+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(e,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this.z=t.z+(e.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const s=t.x,i=t.y,r=t.z,h=e.x,n=e.y,a=e.z;return this.x=i*a-r*n,this.y=r*h-s*a,this.z=s*n-i*h,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const s=t.dot(this)/e;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return a.copy(this).projectOnVector(t),this.sub(a)}reflect(t){return this.sub(a.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const s=this.dot(t)/e;return Math.acos(r(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,s=this.y-t.y,i=this.z-t.z;return e*e+s*s+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,s){const i=Math.sin(e)*t;return this.x=i*Math.sin(s),this.y=Math.cos(e)*t,this.z=i*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,s){return this.x=t*Math.sin(e),this.y=s,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=s,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,s=Math.sqrt(1-t**2);return this.x=s*Math.cos(e),this.y=s*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const a=new n,o=new h,l=2e3;class c{constructor(t,e,s,i,r,h,n,a,o,l,u,d,m,x,y,p){c.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,s,i,r,h,n,a,o,l,u,d,m,x,y,p)}set(t,e,s,i,r,h,n,a,o,l,c,u,d,m,x,y){const p=this.elements;return p[0]=t,p[4]=e,p[8]=s,p[12]=i,p[1]=r,p[5]=h,p[9]=n,p[13]=a,p[2]=o,p[6]=l,p[10]=c,p[14]=u,p[3]=d,p[7]=m,p[11]=x,p[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new c).fromArray(this.elements)}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],this}copyPosition(t){const e=this.elements,s=t.elements;return e[12]=s[12],e[13]=s[13],e[14]=s[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,s){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,e,s){return this.set(t.x,e.x,s.x,0,t.y,e.y,s.y,0,t.z,e.z,s.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,s=t.elements,i=1/u.setFromMatrixColumn(t,0).length(),r=1/u.setFromMatrixColumn(t,1).length(),h=1/u.setFromMatrixColumn(t,2).length();return e[0]=s[0]*i,e[1]=s[1]*i,e[2]=s[2]*i,e[3]=0,e[4]=s[4]*r,e[5]=s[5]*r,e[6]=s[6]*r,e[7]=0,e[8]=s[8]*h,e[9]=s[9]*h,e[10]=s[10]*h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,s=t.x,i=t.y,r=t.z,h=Math.cos(s),n=Math.sin(s),a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){const t=h*l,s=h*c,i=n*l,r=n*c;e[0]=a*l,e[4]=-a*c,e[8]=o,e[1]=s+i*o,e[5]=t-r*o,e[9]=-n*a,e[2]=r-t*o,e[6]=i+s*o,e[10]=h*a}else if("YXZ"===t.order){const t=a*l,s=a*c,i=o*l,r=o*c;e[0]=t+r*n,e[4]=i*n-s,e[8]=h*o,e[1]=h*c,e[5]=h*l,e[9]=-n,e[2]=s*n-i,e[6]=r+t*n,e[10]=h*a}else if("ZXY"===t.order){const t=a*l,s=a*c,i=o*l,r=o*c;e[0]=t-r*n,e[4]=-h*c,e[8]=i+s*n,e[1]=s+i*n,e[5]=h*l,e[9]=r-t*n,e[2]=-h*o,e[6]=n,e[10]=h*a}else if("ZYX"===t.order){const t=h*l,s=h*c,i=n*l,r=n*c;e[0]=a*l,e[4]=i*o-s,e[8]=t*o+r,e[1]=a*c,e[5]=r*o+t,e[9]=s*o-i,e[2]=-o,e[6]=n*a,e[10]=h*a}else if("YZX"===t.order){const t=h*a,s=h*o,i=n*a,r=n*o;e[0]=a*l,e[4]=r-t*c,e[8]=i*c+s,e[1]=c,e[5]=h*l,e[9]=-n*l,e[2]=-o*l,e[6]=s*c+i,e[10]=t-r*c}else if("XZY"===t.order){const t=h*a,s=h*o,i=n*a,r=n*o;e[0]=a*l,e[4]=-c,e[8]=o*l,e[1]=t*c+r,e[5]=h*l,e[9]=s*c-i,e[2]=i*c-s,e[6]=n*l,e[10]=r*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(m,t,x)}lookAt(t,e,s){const i=this.elements;return _.subVectors(t,e),0===_.lengthSq()&&(_.z=1),_.normalize(),y.crossVectors(s,_),0===y.lengthSq()&&(1===Math.abs(s.z)?_.x+=1e-4:_.z+=1e-4,_.normalize(),y.crossVectors(s,_)),y.normalize(),p.crossVectors(_,y),i[0]=y.x,i[4]=p.x,i[8]=_.x,i[1]=y.y,i[5]=p.y,i[9]=_.y,i[2]=y.z,i[6]=p.z,i[10]=_.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,i=e.elements,r=this.elements,h=s[0],n=s[4],a=s[8],o=s[12],l=s[1],c=s[5],u=s[9],d=s[13],m=s[2],x=s[6],y=s[10],p=s[14],_=s[3],M=s[7],f=s[11],g=s[15],z=i[0],b=i[4],w=i[8],v=i[12],k=i[1],C=i[5],A=i[9],O=i[13],S=i[2],W=i[6],F=i[10],E=i[14],j=i[3],T=i[7],R=i[11],P=i[15];return r[0]=h*z+n*k+a*S+o*j,r[4]=h*b+n*C+a*W+o*T,r[8]=h*w+n*A+a*F+o*R,r[12]=h*v+n*O+a*E+o*P,r[1]=l*z+c*k+u*S+d*j,r[5]=l*b+c*C+u*W+d*T,r[9]=l*w+c*A+u*F+d*R,r[13]=l*v+c*O+u*E+d*P,r[2]=m*z+x*k+y*S+p*j,r[6]=m*b+x*C+y*W+p*T,r[10]=m*w+x*A+y*F+p*R,r[14]=m*v+x*O+y*E+p*P,r[3]=_*z+M*k+f*S+g*j,r[7]=_*b+M*C+f*W+g*T,r[11]=_*w+M*A+f*F+g*R,r[15]=_*v+M*O+f*E+g*P,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[4],i=t[8],r=t[12],h=t[1],n=t[5],a=t[9],o=t[13],l=t[2],c=t[6],u=t[10],d=t[14];return t[3]*(+r*a*c-i*o*c-r*n*u+s*o*u+i*n*d-s*a*d)+t[7]*(+e*a*d-e*o*u+r*h*u-i*h*d+i*o*l-r*a*l)+t[11]*(+e*o*c-e*n*d-r*h*c+s*h*d+r*n*l-s*o*l)+t[15]*(-i*n*l-e*a*c+e*n*u+i*h*c-s*h*u+s*a*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,s){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=s),this}invert(){const t=this.elements,e=t[0],s=t[1],i=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],l=t[8],c=t[9],u=t[10],d=t[11],m=t[12],x=t[13],y=t[14],p=t[15],_=c*y*o-x*u*o+x*a*d-n*y*d-c*a*p+n*u*p,M=m*u*o-l*y*o-m*a*d+h*y*d+l*a*p-h*u*p,f=l*x*o-m*c*o+m*n*d-h*x*d-l*n*p+h*c*p,g=m*c*a-l*x*a-m*n*u+h*x*u+l*n*y-h*c*y,z=e*_+s*M+i*f+r*g;if(0===z)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/z;return t[0]=_*b,t[1]=(x*u*r-c*y*r-x*i*d+s*y*d+c*i*p-s*u*p)*b,t[2]=(n*y*r-x*a*r+x*i*o-s*y*o-n*i*p+s*a*p)*b,t[3]=(c*a*r-n*u*r-c*i*o+s*u*o+n*i*d-s*a*d)*b,t[4]=M*b,t[5]=(l*y*r-m*u*r+m*i*d-e*y*d-l*i*p+e*u*p)*b,t[6]=(m*a*r-h*y*r-m*i*o+e*y*o+h*i*p-e*a*p)*b,t[7]=(h*u*r-l*a*r+l*i*o-e*u*o-h*i*d+e*a*d)*b,t[8]=f*b,t[9]=(m*c*r-l*x*r-m*s*d+e*x*d+l*s*p-e*c*p)*b,t[10]=(h*x*r-m*n*r+m*s*o-e*x*o-h*s*p+e*n*p)*b,t[11]=(l*n*r-h*c*r-l*s*o+e*c*o+h*s*d-e*n*d)*b,t[12]=g*b,t[13]=(l*x*i-m*c*i+m*s*u-e*x*u-l*s*y+e*c*y)*b,t[14]=(m*n*i-h*x*i-m*s*a+e*x*a+h*s*y-e*n*y)*b,t[15]=(h*c*i-l*n*i+l*s*a-e*c*a-h*s*u+e*n*u)*b,this}scale(t){const e=this.elements,s=t.x,i=t.y,r=t.z;return e[0]*=s,e[4]*=i,e[8]*=r,e[1]*=s,e[5]*=i,e[9]*=r,e[2]*=s,e[6]*=i,e[10]*=r,e[3]*=s,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,s,i))}makeTranslation(t,e,s){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,s,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const s=Math.cos(e),i=Math.sin(e),r=1-s,h=t.x,n=t.y,a=t.z,o=r*h,l=r*n;return this.set(o*h+s,o*n-i*a,o*a+i*n,0,o*n+i*a,l*n+s,l*a-i*h,0,o*a-i*n,l*a+i*h,r*a*a+s,0,0,0,0,1),this}makeScale(t,e,s){return this.set(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,e,s,i,r,h){return this.set(1,s,r,0,t,1,h,0,e,i,1,0,0,0,0,1),this}compose(t,e,s){const i=this.elements,r=e._x,h=e._y,n=e._z,a=e._w,o=r+r,l=h+h,c=n+n,u=r*o,d=r*l,m=r*c,x=h*l,y=h*c,p=n*c,_=a*o,M=a*l,f=a*c,g=s.x,z=s.y,b=s.z;return i[0]=(1-(x+p))*g,i[1]=(d+f)*g,i[2]=(m-M)*g,i[3]=0,i[4]=(d-f)*z,i[5]=(1-(u+p))*z,i[6]=(y+_)*z,i[7]=0,i[8]=(m+M)*b,i[9]=(y-_)*b,i[10]=(1-(u+x))*b,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,s){const i=this.elements;let r=u.set(i[0],i[1],i[2]).length();const h=u.set(i[4],i[5],i[6]).length(),n=u.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],d.copy(this);const a=1/r,o=1/h,l=1/n;return d.elements[0]*=a,d.elements[1]*=a,d.elements[2]*=a,d.elements[4]*=o,d.elements[5]*=o,d.elements[6]*=o,d.elements[8]*=l,d.elements[9]*=l,d.elements[10]*=l,e.setFromRotationMatrix(d),s.x=r,s.y=h,s.z=n,this}makePerspective(t,e,s,i,r,h,n=2e3){const a=this.elements,o=2*r/(e-t),c=2*r/(s-i),u=(e+t)/(e-t),d=(s+i)/(s-i);let m,x;if(n===l)m=-(h+r)/(h-r),x=-2*h*r/(h-r);else{if(2001!==n)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+n);m=-h/(h-r),x=-h*r/(h-r)}return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=m,a[14]=x,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,s,i,r,h,n=2e3){const a=this.elements,o=1/(e-t),c=1/(s-i),u=1/(h-r),d=(e+t)*o,m=(s+i)*c;let x,y;if(n===l)x=(h+r)*u,y=-2*u;else{if(2001!==n)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+n);x=r*u,y=-1*u}return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-m,a[2]=0,a[6]=0,a[10]=y,a[14]=-x,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,s=t.elements;for(let t=0;t<16;t++)if(e[t]!==s[t])return!1;return!0}fromArray(t,e=0){for(let s=0;s<16;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t[e+9]=s[9],t[e+10]=s[10],t[e+11]=s[11],t[e+12]=s[12],t[e+13]=s[13],t[e+14]=s[14],t[e+15]=s[15],t}}const u=new n,d=new c,m=new n(0,0,0),x=new n(1,1,1),y=new n,p=new n,_=new n;class M{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(e)&&s[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[t]&&-1!==s[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const s=this._listeners[t];if(void 0!==s){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const s=e.slice(0);for(let e=0,i=s.length;e<i;e++)s[e].call(this,t);t.target=null}}}const f=new c,g=new h;class z{constructor(t=0,e=0,s=0,i=z.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=s,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,s,i=this._order){return this._x=t,this._y=e,this._z=s,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,s=!0){const i=t.elements,h=i[0],n=i[4],a=i[8],o=i[1],l=i[5],c=i[9],u=i[2],d=i[6],m=i[10];switch(e){case"XYZ":this._y=Math.asin(r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-n,h)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,h),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,m),this._z=Math.atan2(-n,l)):(this._y=0,this._z=Math.atan2(o,h));break;case"ZYX":this._y=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,m),this._z=Math.atan2(o,h)):(this._x=0,this._z=Math.atan2(-n,l));break;case"YZX":this._z=Math.asin(r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,h)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-r(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,h)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===s&&this._onChangeCallback(),this}setFromQuaternion(t,e,s){return f.makeRotationFromQuaternion(t),this.setFromRotationMatrix(f,e,s)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return g.setFromEuler(this),this.setFromQuaternion(g,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}z.DEFAULT_ORDER="XYZ";class b{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}class w{constructor(t,e,s,i,r,h,n,a,o){w.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,s,i,r,h,n,a,o)}set(t,e,s,i,r,h,n,a,o){const l=this.elements;return l[0]=t,l[1]=i,l[2]=n,l[3]=e,l[4]=r,l[5]=a,l[6]=s,l[7]=h,l[8]=o,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],this}extractBasis(t,e,s){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,i=e.elements,r=this.elements,h=s[0],n=s[3],a=s[6],o=s[1],l=s[4],c=s[7],u=s[2],d=s[5],m=s[8],x=i[0],y=i[3],p=i[6],_=i[1],M=i[4],f=i[7],g=i[2],z=i[5],b=i[8];return r[0]=h*x+n*_+a*g,r[3]=h*y+n*M+a*z,r[6]=h*p+n*f+a*b,r[1]=o*x+l*_+c*g,r[4]=o*y+l*M+c*z,r[7]=o*p+l*f+c*b,r[2]=u*x+d*_+m*g,r[5]=u*y+d*M+m*z,r[8]=u*p+d*f+m*b,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[1],i=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],l=t[8];return e*h*l-e*n*o-s*r*l+s*n*a+i*r*o-i*h*a}invert(){const t=this.elements,e=t[0],s=t[1],i=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],l=t[8],c=l*h-n*o,u=n*a-l*r,d=o*r-h*a,m=e*c+s*u+i*d;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const x=1/m;return t[0]=c*x,t[1]=(i*o-l*s)*x,t[2]=(n*s-i*h)*x,t[3]=u*x,t[4]=(l*e-i*a)*x,t[5]=(i*r-n*e)*x,t[6]=d*x,t[7]=(s*a-o*e)*x,t[8]=(h*e-s*r)*x,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,s,i,r,h,n){const a=Math.cos(r),o=Math.sin(r);return this.set(s*a,s*o,-s*(a*h+o*n)+h+t,-i*o,i*a,-i*(-o*h+a*n)+n+e,0,0,1),this}scale(t,e){return this.premultiply(v.makeScale(t,e)),this}rotate(t){return this.premultiply(v.makeRotation(-t)),this}translate(t,e){return this.premultiply(v.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,s,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,s=t.elements;for(let t=0;t<9;t++)if(e[t]!==s[t])return!1;return!0}fromArray(t,e=0){for(let s=0;s<9;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const v=new w;let k=0;const C=new n,A=new h,O=new c,S=new n,W=new n,F=new n,E=new h,j=new n(1,0,0),T=new n(0,1,0),R=new n(0,0,1),P={type:"added"},q={type:"removed"};class U extends M{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:k++}),this.uuid=i(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=U.DEFAULT_UP.clone();const t=new n,e=new z,s=new h,r=new n(1,1,1);e._onChange((function(){s.setFromEuler(e,!1)})),s._onChange((function(){e.setFromQuaternion(s,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new c},normalMatrix:{value:new w}}),this.matrix=new c,this.matrixWorld=new c,this.matrixAutoUpdate=U.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=U.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new b,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return A.setFromAxisAngle(t,e),this.quaternion.multiply(A),this}rotateOnWorldAxis(t,e){return A.setFromAxisAngle(t,e),this.quaternion.premultiply(A),this}rotateX(t){return this.rotateOnAxis(j,t)}rotateY(t){return this.rotateOnAxis(T,t)}rotateZ(t){return this.rotateOnAxis(R,t)}translateOnAxis(t,e){return C.copy(t).applyQuaternion(this.quaternion),this.position.add(C.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(j,t)}translateY(t){return this.translateOnAxis(T,t)}translateZ(t){return this.translateOnAxis(R,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(O.copy(this.matrixWorld).invert())}lookAt(t,e,s){t.isVector3?S.copy(t):S.set(t,e,s);const i=this.parent;this.updateWorldMatrix(!0,!1),W.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?O.lookAt(W,S,this.up):O.lookAt(S,W,this.up),this.quaternion.setFromRotationMatrix(O),i&&(O.extractRotation(i.matrixWorld),A.setFromRotationMatrix(O),this.quaternion.premultiply(A.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(P)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(q)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(q)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),O.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),O.multiply(t.parent.matrixWorld)),t.applyMatrix4(O),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let s=0,i=this.children.length;s<i;s++){const i=this.children[s].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e){let s=[];this[t]===e&&s.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(t,e);r.length>0&&(s=s.concat(r))}return s}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(W,t,F),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(W,E,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let s=0,i=e.length;s<i;s++)e[s].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let s=0,i=e.length;s<i;s++)e[s].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let s=0,i=e.length;s<i;s++){const i=e[s];!0!==i.matrixWorldAutoUpdate&&!0!==t||i.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const s=this.parent;if(!0===t&&null!==s&&!0===s.matrixWorldAutoUpdate&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,s=t.length;e<s;e++){const s=t[e];!0===s.matrixWorldAutoUpdate&&s.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,s={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,s){return void 0===e[s.uuid]&&(e[s.uuid]=s.toJSON(t)),s.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const s=e.shapes;if(Array.isArray(s))for(let e=0,i=s.length;e<i;e++){const i=s[e];r(t.shapes,i)}else r(t.shapes,s)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let s=0,i=this.material.length;s<i;s++)e.push(r(t.materials,this.material[s]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const s=this.animations[e];i.animations.push(r(t.animations,s))}}if(e){const e=h(t.geometries),i=h(t.materials),r=h(t.textures),n=h(t.images),a=h(t.shapes),o=h(t.skeletons),l=h(t.animations),c=h(t.nodes);e.length>0&&(s.geometries=e),i.length>0&&(s.materials=i),r.length>0&&(s.textures=r),n.length>0&&(s.images=n),a.length>0&&(s.shapes=a),o.length>0&&(s.skeletons=o),l.length>0&&(s.animations=l),c.length>0&&(s.nodes=c)}return s.object=i,s;function h(t){const e=[];for(const s in t){const i=t[s];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const s=t.children[e];this.add(s.clone())}return this}}U.DEFAULT_UP=new n(0,1,0),U.DEFAULT_MATRIX_AUTO_UPDATE=!0,U.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;class D extends U{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new c,this.projectionMatrix=new c,this.projectionMatrixInverse=new c,this.coordinateSystem=l}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const I=new n,N=new h,X=new n;class Y extends U{constructor(t=document.createElement("div")){super(),this.isCSS3DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(t){t.element instanceof Element&&null!==t.element.parentNode&&t.element.parentNode.removeChild(t.element)}))}))}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this}}const L=new c,V=new c;let Z=new class extends U{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}};var B=new class extends D{constructor(t=50,e=1,s=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=s,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*s*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*e*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*s*Math.atan(Math.tan(.5*e*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,s,i,r,h){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=s,this.view.offsetY=i,this.view.width=r,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let s=t*Math.tan(.5*e*this.fov)/this.zoom,i=2*s,r=this.aspect*i,h=-.5*r;const n=this.view;if(null!==this.view&&this.view.enabled){const t=n.fullWidth,e=n.fullHeight;h+=n.offsetX*r/t,s-=n.offsetY*i/e,r*=n.width/t,i*=n.height/e}const a=this.filmOffset;0!==a&&(h+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+r,s,s-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}(75,window.innerWidth/window.innerHeight,.1,1e3),H=new class{constructor(t={}){const e=this;let s,i,r,h;const n={camera:{fov:0,style:""},objects:new WeakMap},a=void 0!==t.element?t.element:document.createElement("div");a.style.overflow="hidden",this.domElement=a;const o=document.createElement("div");o.style.transformOrigin="0 0",o.style.pointerEvents="none",a.appendChild(o);const l=document.createElement("div");function c(t){return Math.abs(t)<1e-10?0:t}function u(t){const e=t.elements;return"matrix3d("+c(e[0])+","+c(-e[1])+","+c(e[2])+","+c(e[3])+","+c(e[4])+","+c(-e[5])+","+c(e[6])+","+c(e[7])+","+c(e[8])+","+c(-e[9])+","+c(e[10])+","+c(e[11])+","+c(e[12])+","+c(-e[13])+","+c(e[14])+","+c(e[15])+")"}function d(t){const e=t.elements;return"translate(-50%,-50%)"+("matrix3d("+c(e[0])+","+c(e[1])+","+c(e[2])+","+c(e[3])+","+c(-e[4])+","+c(-e[5])+","+c(-e[6])+","+c(-e[7])+","+c(e[8])+","+c(e[9])+","+c(e[10])+","+c(e[11])+","+c(e[12])+","+c(e[13])+","+c(e[14])+","+c(e[15])+")")}function m(t,s,i,r){if(t.isCSS3DObject){const r=!0===t.visible&&!0===t.layers.test(i.layers);if(t.element.style.display=!0===r?"":"none",!0===r){let r;t.onBeforeRender(e,s,i),t.isCSS3DSprite?(L.copy(i.matrixWorldInverse),L.transpose(),0!==t.rotation2D&&L.multiply(V.makeRotationZ(t.rotation2D)),t.matrixWorld.decompose(I,N,X),L.setPosition(I),L.scale(X),L.elements[3]=0,L.elements[7]=0,L.elements[11]=0,L.elements[15]=1,r=d(L)):r=d(t.matrixWorld);const h=t.element,a=n.objects.get(t);if(void 0===a||a.style!==r){h.style.transform=r;const e={style:r};n.objects.set(t,e)}h.parentNode!==l&&l.appendChild(h),t.onAfterRender(e,s,i)}}for(let e=0,h=t.children.length;e<h;e++)m(t.children[e],s,i,r)}l.style.transformStyle="preserve-3d",o.appendChild(l),this.getSize=function(){return{width:s,height:i}},this.render=function(t,e){const a=e.projectionMatrix.elements[5]*h;let d,x;n.camera.fov!==a&&(o.style.perspective=e.isPerspectiveCamera?a+"px":"",n.camera.fov=a),e.view&&e.view.enabled?(o.style.transform=`translate( ${-e.view.offsetX*(s/e.view.width)}px, ${-e.view.offsetY*(i/e.view.height)}px )`,o.style.transform+=`scale( ${e.view.fullWidth/e.view.width}, ${e.view.fullHeight/e.view.height} )`):o.style.transform="",!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),e.isOrthographicCamera&&(d=-(e.right+e.left)/2,x=(e.top+e.bottom)/2);const y=e.view&&e.view.enabled?e.view.height/e.view.fullHeight:1,p=e.isOrthographicCamera?`scale( ${y} )scale(`+a+")translate("+c(d)+"px,"+c(x)+"px)"+u(e.matrixWorldInverse):`scale( ${y} )translateZ(`+a+"px)"+u(e.matrixWorldInverse),_=p+"translate("+r+"px,"+h+"px)";n.camera.style!==_&&(l.style.transform=_,n.camera.style=_),m(t,t,e,p)},this.setSize=function(t,e){s=t,i=e,r=s/2,h=i/2,a.style.width=t+"px",a.style.height=e+"px",o.style.width=t+"px",o.style.height=e+"px",l.style.width=t+"px",l.style.height=e+"px"}}};H.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(H.domElement);for(var Q=new class extends U{constructor(){super(),this.isGroup=!0,this.type="Group"}},J=0;J<=50;J++)for(var G=J*Math.PI/50,$=Math.sin(G),K=-Math.cos(G),tt=0;tt<=50;tt++){var et=2*tt*Math.PI/50,st=Math.sin(et),it=Math.cos(et)*$,rt=K,ht=st*$,nt=document.createElement("div");nt.className="dot";var at=new Y(nt);at.position.set(100*it,100*rt,100*ht),Q.add(at)}Z.add(Q),B.position.z=500,function t(){requestAnimationFrame(t),Q.rotation.x+=.01,Q.rotation.y+=.01,H.render(Z,B)}()})();
</script>
</body>
</html>
